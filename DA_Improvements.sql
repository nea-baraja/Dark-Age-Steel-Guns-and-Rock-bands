
DELETE FROM Improvement_ValidTerrains 
WHERE ImprovementType IN 
('IMPROVEMENT_FARM', 'IMPROVEMENT_MINE');

DELETE FROM Improvement_ValidFeatures 
WHERE ImprovementType IN 
('IMPROVEMENT_FARM');

UPDATE Improvement_ValidResources SET MustRemoveFeature = 0 WHERE ImprovementType = 'IMPROVEMENT_FARM';

UPDATE Improvements SET Housing = 2 
WHERE ImprovementType IN 
('IMPROVEMENT_FARM', 'IMPROVEMENT_PASTURE', 'IMPROVEMENT_CAMP','IMPROVEMENT_PLANTATION','IMPROVEMENT_FISHING_BOATS');

UPDATE Improvement_YieldChanges SET YieldChange = 3 
WHERE (ImprovementType = 'IMPROVEMENT_PLANTATION' OR ImprovementType = 'IMPROVEMENT_CAMP') AND YieldType = 'YIELD_GOLD';

UPDATE Improvement_YieldChanges SET YieldChange = 1 
WHERE (ImprovementType = 'IMPROVEMENT_PLANTATION' OR ImprovementType = 'IMPROVEMENT_CAMP' OR ImprovementType = 'IMPROVEMENT_PASTURE') AND YieldType = 'YIELD_FOOD';

UPDATE Improvement_YieldChanges SET YieldChange = 2 
WHERE ImprovementType = 'IMPROVEMENT_QUARRY' AND YieldType = 'YIELD_PRODUCTION';



INSERT OR REPLACE INTO DistrictModifiers (DistrictType, ModifierId) VALUES 
('DISTRICT_CITY_CENTER', 'DA_FARM_ADJACENT_FOOD'),
('DISTRICT_CITY_CENTER', 'DA_MINE_ADJACENT_PRODUCTION'),
('DISTRICT_CITY_CENTER', 'DA_FISHING_BOATS_ADJACENT_FOOD'),
('DISTRICT_CITY_CENTER', 'DA_LUMBER_MILL_ADJACENT_PRODUCTION');

INSERT INTO ImprovementModifiers (ImprovementType, ModifierId) VALUES 
--('IMPROVEMENT_FARM', 			'FARM_HOUSE_FROM_GRANARY'),
--('IMPROVEMENT_PLANTATION', 		'PLANTATION_HOUSE_FROM_GRANARY'),
--('IMPROVEMENT_CAMP', 			'CAMP_HOUSE_FROM_GRANARY'),
--('IMPROVEMENT_PASTURE', 		'PASTURE_HOUSE_FROM_GRANARY');
('IMPROVEMENT_FISHING_BOATS', 		'FISHING_BOATS_HOUSE_FROM_LIGHTHOUSE');



INSERT OR REPLACE INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('DA_FARM_ADJACENT_FOOD', 		'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'RS_PLAIN_ADJACENT_TO_FARM'),
('DA_MINE_ADJACENT_PRODUCTION', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'RS_HILL_ADJACENT_TO_MINE'),
('DA_FISHING_BOATS_ADJACENT_FOOD', 	'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'RS_COAST_ADJACENT_TO_FISHING_BOATS'),
('DA_LUMBER_MILL_ADJACENT_PRODUCTION', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'RS_FOREST_ADJACENT_TO_LUMBER_MILL'),
('FARM_HOUSE_FROM_GRANARY', 	'MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_HOUSING', 0, 0, 0, NULL, 'RS_CITY_HAS_GRANARY'),
('PLANTATION_HOUSE_FROM_GRANARY','MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_HOUSING', 0, 0, 0, NULL, 'RS_CITY_HAS_GRANARY'),
('CAMP_HOUSE_FROM_GRANARY', 	'MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_HOUSING', 0, 0, 0, NULL, 'RS_CITY_HAS_GRANARY'),
('PASTURE_HOUSE_FROM_GRANARY', 	'MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_HOUSING', 0, 0, 0, NULL, 'RS_CITY_HAS_GRANARY'),
('FISHING_BOATS_HOUSE_FROM_LIGHTHOUSE', 'MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_HOUSING', 0, 0, 0, NULL, 'RS_CITY_HAS_LIGHTHOUSE');


INSERT OR REPLACE INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('DA_FARM_ADJACENT_FOOD', 		'Amount', '1'), 
('DA_FARM_ADJACENT_FOOD', 		'YieldType', 'YIELD_FOOD'),
('DA_MINE_ADJACENT_PRODUCTION', 'Amount', '1'), 
('DA_MINE_ADJACENT_PRODUCTION', 'YieldType', 'YIELD_PRODUCTION'),
('DA_FISHING_BOATS_ADJACENT_FOOD', 		'Amount', '1'), 
('DA_FISHING_BOATS_ADJACENT_FOOD', 		'YieldType', 'YIELD_FOOD'),
('DA_LUMBER_MILL_ADJACENT_PRODUCTION', 'Amount', '1'), 
('DA_LUMBER_MILL_ADJACENT_PRODUCTION', 'YieldType', 'YIELD_PRODUCTION'),
('FARM_HOUSE_FROM_GRANARY', 	'Amount', 	'1'),
('PLANTATION_HOUSE_FROM_GRANARY', 'Amount', '1'),
('CAMP_HOUSE_FROM_GRANARY', 	'Amount', 	'1'),
('PASTURE_HOUSE_FROM_GRANARY', 	'Amount', 	'1'),
('FISHING_BOATS_HOUSE_FROM_LIGHTHOUSE', 'Amount', 	'2');


-- RequirementSets

INSERT OR REPLACE INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES 
('RS_PLAIN_ADJACENT_TO_FARM', 	'REQUIREMENTSET_TEST_ALL'),
('RS_HILL_ADJACENT_TO_MINE',  	'REQUIREMENTSET_TEST_ALL'),
('RS_CITY_HAS_GRANARY', 		'REQUIREMENTSET_TEST_ALL'),
('RS_CITY_HAS_LIGHTHOUSE', 		'REQUIREMENTSET_TEST_ALL'),
('RS_COAST_ADJACENT_TO_FISHING_BOATS', 	'REQUIREMENTSET_TEST_ALL'),
('RS_FOREST_ADJACENT_TO_LUMBER_MILL',  	'REQUIREMENTSET_TEST_ALL');

INSERT OR REPLACE INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES 
('RS_PLAIN_ADJACENT_TO_FARM', 	'REQ_ADJACENT_TO_FARM'), 
('RS_PLAIN_ADJACENT_TO_FARM', 	'REQ_IS_FOOD_PLAIN'),
('RS_HILL_ADJACENT_TO_MINE', 	'REQ_ADJACENT_TO_MINE'), 
('RS_HILL_ADJACENT_TO_MINE', 	'REQ_IS_MINE_HILL'),
('RS_CITY_HAS_GRANARY', 		'REQ_CITY_HAS_GRANARY'),
('RS_CITY_HAS_LIGHTHOUSE', 		'REQ_CITY_HAS_LIGHTHOUSE'),
('RS_COAST_ADJACENT_TO_FISHING_BOATS', 	'REQ_ADJACENT_TO_FISHING_BOATS'), 
('RS_COAST_ADJACENT_TO_FISHING_BOATS', 	'REQ_IS_TERRAIN_COAST'),
('RS_FOREST_ADJACENT_TO_LUMBER_MILL', 	'REQ_ADJACENT_TO_LUMBER_MILL'), 
('RS_FOREST_ADJACENT_TO_LUMBER_MILL', 	'REQ_IS_FEATURE_FOREST');

-- Requirements

INSERT OR REPLACE INTO Requirements (RequirementId, RequirementType) VALUES 
('REQ_ADJACENT_TO_FARM', 	'REQUIREMENT_PLOT_ADJACENT_IMPROVEMENT_TYPE_MATCHES'), 
('REQ_IS_FOOD_PLAIN', 		'REQUIREMENT_PLOT_TERRAIN_CLASS_MATCHES'),
('REQ_ADJACENT_TO_MINE', 	'REQUIREMENT_PLOT_ADJACENT_IMPROVEMENT_TYPE_MATCHES'), 
('REQ_IS_MINE_HILL', 		'REQUIREMENT_PLOT_TERRAIN_CLASS_MATCHES'),
('REQ_CITY_HAS_GRANARY', 	'REQUIREMENT_CITY_HAS_BUILDING'),
('REQ_ADJACENT_TO_FISHING_BOATS', 	'REQUIREMENT_PLOT_ADJACENT_IMPROVEMENT_TYPE_MATCHES'), 
('REQ_ADJACENT_TO_LUMBER_MILL', 	'REQUIREMENT_PLOT_ADJACENT_IMPROVEMENT_TYPE_MATCHES'), 
('REQ_CITY_HAS_LIGHTHOUSE', 'REQUIREMENT_CITY_HAS_BUILDING');

INSERT OR REPLACE INTO RequirementArguments (RequirementId, Name, Value) VALUES 
('REQ_ADJACENT_TO_FARM', 	'ImprovementType', 	'IMPROVEMENT_FARM'), 
('REQ_IS_FOOD_PLAIN', 		'TerrainClass', 	'TERRAIN_CLASS_FOOD_PLAINS'),
('REQ_ADJACENT_TO_MINE', 	'ImprovementType', 	'IMPROVEMENT_MINE'), 
('REQ_IS_MINE_HILL', 		'TerrainClass', 	'TERRAIN_CLASS_MINE_HILLS'),
('REQ_CITY_HAS_GRANARY', 	'BuildingType', 	'BUILDING_GRANARY'),
('REQ_ADJACENT_TO_FISHING_BOATS', 	'ImprovementType', 	'IMPROVEMENT_FISHING_BOATS'), 
('REQ_ADJACENT_TO_LUMBER_MILL', 	'ImprovementType', 	'IMPROVEMENT_LUMBER_MILL'), 
('REQ_CITY_HAS_LIGHTHOUSE', 'BuildingType', 	'BUILDING_LIGHTHOUSE');
